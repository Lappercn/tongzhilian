# 团队加入密钥管理指南

## 密钥配置文件位置

密钥配置文件位于: `doc/.vitepress/config/access-keys.json`

## 配置文件结构

```json
{
  "keys": [
    "TEAM2025",
    "JOIN_US_2025",
    "WELCOME_ABOARD"
  ],
  "description": "团队加入密钥配置文件",
  "instructions": "管理员可以在 keys 数组中添加或删除有效的密钥。用户输入的密钥只要匹配数组中的任意一个即可通过验证。",
  "lastUpdated": "2025-11-21"
}
```

## 如何管理密钥

### 1. 添加新密钥

在 `keys` 数组中添加新的密钥字符串:

```json
{
  "keys": [
    "TEAM2025",
    "JOIN_US_2025",
    "WELCOME_ABOARD",
    "NEW_KEY_2025"  // 新添加的密钥
  ]
}
```

### 2. 删除旧密钥

从 `keys` 数组中移除不再使用的密钥:

```json
{
  "keys": [
    "TEAM2025",
    "WELCOME_ABOARD"  // 已删除 JOIN_US_2025
  ]
}
```

### 3. 更换所有密钥

完全替换 `keys` 数组中的所有密钥:

```json
{
  "keys": [
    "SPRING_2025",
    "SUMMER_2025"
  ]
}
```

## 密钥验证规则

1. **不区分大小写**: 用户输入 `team2025` 或 `TEAM2025` 都会被接受
2. **自动去除空格**: 用户输入前后的空格会被自动去除
3. **任意匹配**: 只要匹配数组中的任意一个密钥即可通过验证
4. **支持多个密钥**: 可以同时配置多个有效密钥,方便不同时期或不同渠道使用

## 密钥设计建议

### 安全性建议

1. **定期更换**: 建议每季度或每半年更换一次密钥
2. **复杂度适中**: 既要保证安全性,又要便于记忆和输入
3. **避免常见词**: 不要使用 `password`、`123456` 等常见密钥
4. **长度建议**: 8-20 个字符为宜

### 命名建议

1. **时间标识**: 包含年份或季度,如 `TEAM2025Q1`
2. **主题标识**: 使用有意义的词汇,如 `INNOVATION_2025`
3. **组合方式**: 可以使用字母+数字组合,如 `JOIN2025`

### 示例密钥

```
好的密钥示例:
✅ TEAM2025
✅ JOIN_US_2025
✅ WELCOME_ABOARD
✅ INNOVATION_Q1
✅ SPRING_RECRUIT

不推荐的密钥:
❌ 123456
❌ password
❌ admin
❌ test
```

## 密钥分发

### 如何安全地分发密钥

1. **内部渠道**
   - 通过企业邮件发送
   - 在团队会议上口头告知
   - 通过企业即时通讯工具私聊发送

2. **外部渠道**
   - 在招聘邮件中附带
   - 在面试过程中告知
   - 通过官方社交媒体私信发送

3. **注意事项**
   - ⚠️ 不要在公开网页上直接显示密钥
   - ⚠️ 不要在公开的 GitHub 仓库中暴露密钥
   - ⚠️ 定期检查密钥是否泄露

## 应用场景

### 场景 1: 定期招聘

为每个招聘季设置不同的密钥:

```json
{
  "keys": [
    "SPRING_2025",    // 春季招聘
    "AUTUMN_2025"     // 秋季招聘
  ]
}
```

### 场景 2: 多渠道招聘

为不同招聘渠道设置不同密钥,便于追踪来源:

```json
{
  "keys": [
    "CAMPUS_2025",    // 校园招聘
    "SOCIAL_2025",    // 社招
    "REFERRAL_2025"   // 内推
  ]
}
```

### 场景 3: 临时开放

设置临时密钥,活动结束后删除:

```json
{
  "keys": [
    "TEAM2025",       // 长期有效
    "EVENT_0121"      // 1月21日活动专用,活动后删除
  ]
}
```

## 修改密钥后的操作

### 1. 保存文件

修改 `access-keys.json` 文件后保存。

### 2. 重新构建(如果需要)

如果是生产环境,需要重新构建项目:

```bash
npm run docs:build
```

### 3. 通知团队成员

- 通知现有团队成员密钥已更新
- 告知新的有效密钥
- 说明旧密钥的失效时间

### 4. 更新文档

更新配置文件中的 `lastUpdated` 字段:

```json
{
  "keys": [...],
  "lastUpdated": "2025-11-21"  // 更新为当前日期
}
```

## 故障排除

### 问题 1: 用户输入正确密钥但提示错误

**可能原因**:
- 配置文件格式错误
- JSON 语法错误(缺少逗号、引号等)
- 文件未保存或未重新构建

**解决方法**:
1. 检查 JSON 格式是否正确
2. 使用 JSON 验证工具验证文件
3. 确保文件已保存
4. 重新构建项目

### 问题 2: 所有密钥都无法使用

**可能原因**:
- `keys` 数组为空
- 配置文件路径错误
- 导入语句错误

**解决方法**:
1. 确认 `keys` 数组至少包含一个密钥
2. 检查文件路径是否正确
3. 查看浏览器控制台是否有错误信息

### 问题 3: 修改密钥后不生效

**可能原因**:
- 浏览器缓存
- 开发服务器未重启
- 文件未保存

**解决方法**:
1. 清除浏览器缓存或硬刷新 (Ctrl+F5)
2. 重启开发服务器
3. 确认文件已正确保存

## 安全最佳实践

### 1. 版本控制

如果使用 Git,考虑将密钥文件添加到 `.gitignore`:

```
# .gitignore
doc/.vitepress/config/access-keys.json
```

然后创建一个示例文件 `access-keys.example.json`:

```json
{
  "keys": [
    "YOUR_KEY_HERE"
  ],
  "description": "团队加入密钥配置文件",
  "instructions": "复制此文件为 access-keys.json 并填入真实密钥"
}
```

### 2. 环境隔离

为开发环境和生产环境使用不同的密钥:

```json
// 开发环境
{
  "keys": ["DEV_KEY_2025"]
}

// 生产环境
{
  "keys": ["PROD_KEY_2025"]
}
```

### 3. 密钥轮换计划

建立定期轮换密钥的计划:

- **每月**: 检查密钥使用情况
- **每季度**: 更换至少一个密钥
- **每年**: 完全更换所有密钥

### 4. 访问日志

考虑在提交成功时记录使用的密钥(不记录密钥本身,只记录是否验证成功):

```javascript
console.log('成员添加成功', {
  name: newMember.name,
  timestamp: new Date().toISOString(),
  keyValidated: true  // 只记录验证状态,不记录密钥内容
})
```

## 高级配置

### 密钥过期时间

如果需要密钥过期功能,可以扩展配置文件:

```json
{
  "keys": [
    {
      "value": "TEAM2025",
      "expiresAt": null  // 永不过期
    },
    {
      "value": "TEMP_KEY",
      "expiresAt": "2025-12-31"  // 2025年12月31日过期
    }
  ]
}
```

### 密钥使用次数限制

```json
{
  "keys": [
    {
      "value": "LIMITED_KEY",
      "maxUses": 10,  // 最多使用10次
      "currentUses": 0
    }
  ]
}
```

**注意**: 这些高级功能需要修改验证逻辑代码才能实现。

## 联系支持

如有密钥管理相关问题,请联系团队管理员。
